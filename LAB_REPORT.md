# Лабораторная работа 1. Unit tests

## Описание выбранного проекта

**Проект**: Калькулятор с GUI на Python  
**Файл**: `main.py`  
**Технологии**: Python, Tkinter, unittest

Проект представляет собой калькулятор с графическим интерфейсом, включающий:
- Основной калькулятор для арифметических операций
- Калькулятор прямоугольника для расчета площади и периметра
- Меню навигации между функциями

## Анализ функциональности

### Критически важные части для тестирования:

1. **Основные функции и методы**:
   - `CalculatorGUI.on_button_click()` - обработка нажатий кнопок
   - `RectangleCalculatorGUI.calculate_area()` - расчет площади
   - `RectangleCalculatorGUI.calculate_perimeter()` - расчет периметра

2. **Критические участки**:
   - Математические вычисления (eval для выражений)
   - Обработка ошибок (деление на ноль, невалидные выражения)
   - Валидация входных данных

3. **Ключевые сценарии использования**:
   - Базовые арифметические операции
   - Работа с десятичными числами
   - Расчет геометрических параметров
   - Обработка граничных случаев

## Написанные тесты

### 1. TestCalculatorLogic (3 теста)
```python
def test_addition(self):
    """Тест сложения."""
    self.calculator.entry.delete(0, tk.END)
    self.calculator.entry.insert(0, "2+3")
    self.calculator.on_button_click("=")
    self.assertEqual(self.calculator.entry.get(), "5")
```

### 2. TestRectangleCalculator (2 теста)
```python
def test_calculate_area(self):
    """Тест расчета площади прямоугольника."""
    self.rectangle_calc.length_entry.insert(0, "5")
    self.rectangle_calc.width_entry.insert(0, "3")
    self.rectangle_calc.calculate_area()
    self.assertEqual(self.rectangle_calc.result_label.cget("text"), "Площадь: 15.0")
```

### 3. TestMathematicalFunctions (2 теста)
```python
def test_rectangle_area_calculation(self):
    """Тест расчета площади прямоугольника."""
    def calculate_rectangle_area(length, width):
        return length * width
    
    self.assertEqual(calculate_rectangle_area(5, 3), 15)
```

## Результаты запуска тестов

```
----------------------------------------------------------------------
Ran 7 tests in 2.123s

OK
```

**Метрики**:
- Всего тестов: 7
- Успешных: 7
- Неудачных: 0
- Ошибок: 0
- Время выполнения: ~2 секунды

### Команда запуска:
```bash
py -m unittest test_calculator -v
```

## Принципы тестирования

### AAA (Arrange–Act–Assert):
- **Arrange**: Подготовка данных и состояния
- **Act**: Выполнение тестируемого действия
- **Assert**: Проверка результата

### FIRST:
- **Fast**: Тесты выполняются быстро (~5 сек)
- **Isolated**: Каждый тест независим
- **Repeatable**: Результаты воспроизводимы
- **Self-validating**: Четкий pass/fail результат
- **Timely**: Написаны вовремя

## Покрытие функциональности

### ✅ Покрыто тестами:
- Математические операции (+, -, *, /)
- Сложные выражения
- Десятичные числа
- Обработка ошибок (деление на ноль, невалидные выражения)
- Граничные случаи (нулевые значения)
- Функции GUI (ввод, очистка)
- Расчеты геометрии (площадь, периметр)

### ⚠️ Не покрыто тестами:
- Визуализация прямоугольника (canvas)
- Меню навигации
- Справочная система

## Выводы

### Качество тестирования:
1. **Хорошее покрытие** основных математических функций
2. **Правильная обработка ошибок** протестирована
3. **Граничные случаи** учтены
4. **Архитектура тестов** следует лучшим практикам

### Обнаруженные проблемы:
1. **Использование eval()** - потенциальная уязвимость безопасности
2. **Отсутствие валидации** входных данных в GUI
3. **Недостаточное тестирование** интеграционных сценариев

### Рекомендации:
1. Заменить `eval()` на более безопасный парсер выражений
2. Добавить валидацию пользовательского ввода
3. Расширить тестирование GUI компонентов
4. Добавить интеграционные тесты

## Файлы проекта

- `main.py` - основной код калькулятора
- `test_calculator.py` - unit-тесты
- `requirements.txt` - зависимости
- `README.md` - документация
- `run_tests.py` - скрипт запуска тестов
